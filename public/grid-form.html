<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-Column Grid Form</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #22c55e, #0f766e);
      padding: 40px 16px;
      min-height: 100vh;
    }
    .page {
      max-width: 960px;
      margin: 0 auto;
      background: #ecfdf3;
      border-radius: 18px;
      padding: 28px 24px 36px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    }
    h1 { font-size: 26px; margin-bottom: 6px; color: #064e3b; }
    .subtitle { font-size: 14px; color: #047857; margin-bottom: 18px; }
    .note {
      background: #bbf7d0;
      border-radius: 12px;
      border: 1px dashed #22c55e;
      padding: 10px 12px;
      font-size: 13px;
      color: #064e3b;
      margin-bottom: 20px;
    }
    form { margin-top: 4px; }
    .grid-layout {
      display: grid;
      grid-template-columns: 2fr 1.5fr 1.5fr;
      grid-auto-rows: minmax(40px, auto);
      gap: 10px;
      background: #f0fdf4;
      border-radius: 14px;
      border: 1px solid #86efac;
      padding: 14px 14px 16px;
    }
    .grid-header {
      grid-column: 1 / -1;
      font-size: 13px;
      font-weight: 600;
      color: #064e3b;
      margin-bottom: 4px;
    }
    .field-box {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .field-label {
      font-size: 12px;
      color: #047857;
      font-weight: 600;
    }
    input, select {
      width: 100%;
      padding: 7px 9px;
      border-radius: 8px;
      border: 1px solid #bbf7d0;
      font-size: 13px;
      background: #ecfdf3;
    }
    input:focus, select:focus { outline: none; border-color: #22c55e; box-shadow: 0 0 0 1px #22c55e44; }
    .actions { margin-top: 14px; display: flex; justify-content: flex-end; }
    button { border-radius: 999px; padding: 8px 16px; border: none; font-size: 13px; font-weight: 600; cursor: pointer; background: #22c55e; color: #ecfdf3; }
    .message { margin-top: 14px; padding: 9px 11px; border-radius: 8px; font-size: 13px; display: none; }
    .message.success { background: #ecfdf3; color: #166534; border: 1px solid #bbf7d0; }
    .message.error { background: #fef2f2; color: #b91c1c; border: 1px solid #fecaca; }
  </style>
</head>
<body>
<div class="page">
  <a href="/" style="display:inline-block;margin-bottom:12px;color:#047857;text-decoration:none;font-size:13px;">← Back to home</a>
  <h1>Multi-Column Grid Form</h1>
  <p class="subtitle">Tests scanners when fields are scattered across a CSS grid, not grouped in simple rows.</p>

  <div class="note">
    Labels and fields are positioned purely by CSS grid. Logical grouping is not obvious from DOM order.
  </div>

  <form id="gridForm">
    <div class="grid-layout">
      <div class="grid-header">Conference Registration</div>

      <div class="field-box" style="grid-column: 1 / 3;">
        <span class="field-label">Full name *</span>
        <input id="gf_name" name="fullName" required>
      </div>

      <div class="field-box" style="grid-column: 3 / 4;">
        <span class="field-label">Ticket type *</span>
        <select id="gf_ticket" name="ticketType" required>
          <option value="">Select ticket</option>
          <option value="standard">Standard</option>
          <option value="vip">VIP</option>
          <option value="student">Student</option>
        </select>
      </div>

      <div class="field-box" style="grid-column: 1 / 2;">
        <span class="field-label">Email *</span>
        <input id="gf_email" name="email" type="email" required>
      </div>

      <div class="field-box" style="grid-column: 2 / 3;">
        <span class="field-label">Company</span>
        <input id="gf_company" name="company">
      </div>

      <div class="field-box" style="grid-column: 3 / 4;">
        <span class="field-label">Country *</span>
        <input id="gf_country" name="country" required>
      </div>

      <div class="field-box" style="grid-column: 1 / 2;">
        <span class="field-label">Day 1 workshop</span>
        <select id="gf_day1" name="day1Workshop">
          <option value="none">None</option>
          <option value="a">Workshop A</option>
          <option value="b">Workshop B</option>
        </select>
      </div>

      <div class="field-box" style="grid-column: 2 / 4;">
        <span class="field-label">Special requirements</span>
        <input id="gf_requirements" name="requirements">
      </div>
    </div>

    <div class="actions">
      <button type="submit">Submit registration</button>
    </div>

    <div id="grid_message" class="message"></div>
  </form>
</div>

<script>
(function() {
  const form = document.getElementById('gridForm');
  const msg = document.getElementById('grid_message');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form).entries());

    try {
      const res = await fetch('/api/submit-grid-form', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      msg.style.display = 'block';
      msg.className = 'message ' + (result.success ? 'success' : 'error');
      msg.textContent = (result.success ? '✅ ' : '❌ ') + (result.message || 'Submission result');
    } catch (err) {
      msg.style.display = 'block';
      msg.className = 'message error';
      msg.textContent = '❌ Network error while submitting grid form.';
    }
  });
})();
</script>
</body>
</html>
